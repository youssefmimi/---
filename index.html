<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ù…Ø¹Ø±Ø¶ Ø§Ù„Ù†Ù‡ÙŠØ³ÙŠ - Ø§Ù„Ø·Ù„Ø¨Ø§Øª</title>
  <style>
    body { font-family: "Tajawal", sans-serif; background:#fdfdfd; margin:0; padding:0; color:#222; }
    header { background:#1a1a1a; color:#f1c40f; padding:20px; text-align:center; font-size:24px; font-weight:bold; letter-spacing:1px; }
    .container { max-width:1100px; margin:auto; padding:20px; }

    .slider { position:relative; overflow:hidden; border-radius:15px; margin-bottom:30px; box-shadow:0 4px 12px rgba(0,0,0,.2); }
    .slides { display:flex; transition:transform 0.6s ease-in-out; }
    .slides img { width:100%; border-radius:15px; }
    .slider-btn { position:absolute; top:50%; transform:translateY(-50%); background:rgba(0,0,0,.6); color:#fff; border:none; padding:10px 14px; cursor:pointer; border-radius:50%; }
    .prev { left:15px; } .next { right:15px; }

    .filter { text-align:center; margin-bottom:25px; }
    .filter button { background:#fff; border:2px solid #f1c40f; padding:10px 20px; margin:5px; border-radius:25px; cursor:pointer; font-weight:bold; color:#1a1a1a; transition:0.3s; }
    .filter button.active, .filter button:hover { background:#f1c40f; color:#1a1a1a; }

    .products { display:grid; grid-template-columns:repeat(auto-fill, minmax(240px,1fr)); gap:20px; }
    .product { background:#fff; border-radius:15px; box-shadow:0 4px 12px rgba(0,0,0,.15); padding:15px; text-align:center; transition:.3s; border:1px solid #eee; }
    .product:hover { transform:translateY(-6px); box-shadow:0 6px 16px rgba(0,0,0,.2); }
    .product img { width:100%; height:200px; object-fit:cover; border-radius:12px; }
    .product h3 { margin:12px 0 8px; font-size:18px; color:#1a1a1a; }
    .product p { color:#444; font-weight:bold; margin-bottom:10px; }
    .product input[type=number] { width:60px; margin-left:5px; padding:5px; border:1px solid #ccc; border-radius:6px; }
    .product button { background:#f1c40f; color:#1a1a1a; border:none; padding:10px 14px; border-radius:8px; cursor:pointer; margin-top:10px; font-weight:bold; transition:.3s; }
    .product button:hover { background:#d4ac0d; }

    .cart { margin-top:40px; background:#fff; padding:25px; border-radius:15px; box-shadow:0 4px 12px rgba(0,0,0,.15); border:1px solid #eee; }
    .cart h2 { margin-bottom:15px; color:#1a1a1a; }
    .cart ul { list-style:none; padding:0; margin:0; }
    .cart li { display:flex; justify-content:space-between; margin:6px 0; align-items:center; border-bottom:1px dashed #ccc; padding-bottom:6px; }
    .total { font-weight:bold; margin-top:15px; font-size:18px; color:#000; }
    .cart button.remove { background:red; color:#fff; border:none; border-radius:5px; padding:4px 8px; cursor:pointer; }
    button.checkout { width:100%; background:#1a1a1a; color:#f1c40f; padding:12px; border:none; border-radius:10px; cursor:pointer; font-size:16px; margin-top:15px; font-weight:bold; transition:.3s; }
    button.checkout:hover { background:#333; }

    .cart input { width:100%; padding:10px; margin:8px 0; border:2px solid #f1c40f; border-radius:8px; font-size:14px; }

    .modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,.7); justify-content:center; align-items:center; }
    .modal-content { background:#fff; padding:25px; border-radius:15px; text-align:center; max-width:420px; box-shadow:0 4px 14px rgba(0,0,0,.25); border-top:5px solid #f1c40f; }
    .modal-content h3 { color:#27ae60; font-size:20px; }
    .modal-content p { font-size:16px; margin:10px 0; }
    .modal-content span { font-weight:bold; color:#1a1a1a; font-size:18px; }
    .modal-content button { background:#1a1a1a; color:#f1c40f; border:none; padding:10px 20px; border-radius:8px; cursor:pointer; font-weight:bold; transition:0.3s; }
    .modal-content button:hover { background:#333; }
  </style>
</head>
<body>

<header>ğŸ›ï¸ Ù…Ø¹Ø±Ø¶ Ø§Ù„Ù†Ù‡ÙŠØ³ÙŠ - Ø§Ù„Ø·Ù„Ø¨Ø§Øª</header>

<div class="container">

  <div class="slider">
    <div class="slides" id="slides">
      <img src="https://via.placeholder.com/1100x300?text=âœ¨+Ø¹Ø±ÙˆØ¶+Ø§Ù„Ù…Ø¹Ø±Ø¶+Ø§Ù„Ø®Ø§ØµØ©" alt="slide1">
      <img src="https://via.placeholder.com/1100x300?text=ğŸ†•+Ù…Ù†ØªØ¬Ø§Øª+Ø¬Ø¯ÙŠØ¯Ø©" alt="slide2">
      <img src="https://via.placeholder.com/1100x300?text=ğŸ‰+Ø®ØµÙˆÙ…Ø§Øª+Ø§Ù„Ø¹ÙŠØ¯" alt="slide3">
    </div>
    <button class="slider-btn prev" onclick="moveSlide(-1)">â®</button>
    <button class="slider-btn next" onclick="moveSlide(1)">â¯</button>
  </div>

  <div class="filter">
    <button class="active" onclick="filterProducts('all')">Ø§Ù„ÙƒÙ„</button>
    <button onclick="filterProducts('men')">Ø±Ø¬Ø§Ù„ÙŠ ğŸ‘”</button>
    <button onclick="filterProducts('women')">Ø­Ø±ÙŠÙ…ÙŠ ğŸ‘—</button>
    <button onclick="filterProducts('kids')">Ø£Ø·ÙØ§Ù„ ğŸ§’</button>
  </div>

  <div class="products" id="products"></div>

  <div class="cart">
    <h2>ğŸ›’ Ø§Ù„Ø³Ù„Ø©</h2>
    <ul id="cart-items"></ul>
    <p class="total">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: <span id="total">0</span> Ø¬Ù†ÙŠÙ‡</p>
    <form id="checkoutForm" action="https://formspree.io/f/xkgvdykr" method="POST">
      <input type="text" name="name" placeholder="ğŸ‘¤ Ø§Ù„Ø§Ø³Ù…" required>
      <input type="text" name="phone" placeholder="ğŸ“ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„" required>
      <input type="hidden" name="products" id="orderProducts">
      <input type="hidden" name="total" id="orderTotal">
      <input type="hidden" name="date" id="orderDate">
      <input type="hidden" name="pickup_date" id="pickupDate">
      <input type="hidden" name="order_id" id="orderIdField">
      <input type="text" name="custom_product" placeholder="ğŸ“ Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)">
      <button type="submit" class="checkout">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
    </form>
  </div>

  <div class="cart" style="margin-top:25px;">
    <h2>ğŸ“¦ ØªØªØ¨Ø¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h2>
    <input type="text" id="trackInput" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨" style="width:70%; padding:10px; border:1px solid #ccc; border-radius:8px;">
    <button onclick="trackOrder()" style="width:25%; background:#27ae60; color:#fff; border:none; padding:10px; border-radius:8px; font-weight:bold; cursor:pointer;">ğŸ” ØªØªØ¨Ø¹</button>
    <div id="trackResult" style="margin-top:15px; padding:10px; border:1px solid #ccc; border-radius:10px; display:none;"></div>
  </div>

</div>

<div class="modal" id="successModal">
  <div class="modal-content" id="invoice">
    <h2 style="color:#2c3e50;">ğŸ›ï¸ Ù…Ø¹Ø±Ø¶ Ø§Ù„Ù†Ù‡ÙŠØ³ÙŠ</h2>
    <h3 style="color:#27ae60;">âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­</h3>
    <p><b>Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨:</b> <span id="orderId"></span></p>
    <p><b>Ø§Ù„Ø§Ø³Ù…:</b> <span id="invoiceName"></span></p>
    <p><b>Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„:</b> <span id="invoicePhone"></span></p>
    <table>
      <thead><tr><th>Ø§Ù„Ù…Ù†ØªØ¬</th><th>Ø§Ù„ÙƒÙ…ÙŠØ©</th><th>Ø§Ù„Ø³Ø¹Ø±</th><th>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th></tr></thead>
      <tbody id="invoiceTable"></tbody>
    </table>
    <p style="margin-top:10px;"><b>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</b> <span id="invoiceTotal"></span> Ø¬Ù†ÙŠÙ‡</p>
    <p><b>Ù…ÙŠØ¹Ø§Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…:</b> <span id="invoicePickup"></span></p>
    <hr>
    <p style="font-size:14px; color:#555;">Ø´ÙƒØ±Ø§Ù‹ Ù„ØªØ³ÙˆÙ‚ÙƒÙ… Ù…Ù† <b>Ù…Ø¹Ø±Ø¶ Ø§Ù„Ù†Ù‡ÙŠØ³ÙŠ</b> ğŸ’–</p>
    <button onclick="printInvoice()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© / ØªØ­Ù…ÙŠÙ„</button>
    <button onclick="closeModal()">ØªÙ…Ø§Ù…</button>
  </div>
</div>

<script>
const productsData = [
  { name: "Ù‚Ù…ÙŠØµ Ø±Ø¬Ø§Ù„ÙŠ", price: 200, img: "aba.png", category:"men" },
  { name: "Ø¨Ù†Ø·Ù„ÙˆÙ† Ø¬ÙŠÙ†Ø²", price: 250, img: "https://via.placeholder.com/240x200?text=Ø¬ÙŠÙ†Ø²", category:"men" },
  { name: "ØªÙŠØ´ÙŠØ±Øª Ø±Ø¬Ø§Ù„ÙŠ", price: 180, img: "https://via.placeholder.com/240x200?text=ØªÙŠØ´ÙŠØ±Øª", category:"men" },
  { name: "ÙØ³ØªØ§Ù†", price: 350, img: "https://via.placeholder.com/240x200?text=ÙØ³ØªØ§Ù†", category:"women" },
  { name: "Ø¨Ù„ÙˆØ²Ø©", price: 220, img: "https://via.placeholder.com/240x200?text=Ø¨Ù„ÙˆØ²Ø©", category:"women" },
  { name: "Ø¬ÙŠØ¨Ø©", price: 200, img: "https://via.placeholder.com/240x200?text=Ø¬ÙŠØ¨Ø©", category:"women" },
   { name: "ØªÙŠØ´Ø¤Øª Ø§Ø¨ÙŠØ¶", price: 500, img: "aba.png", category:"women" },
  { name: "ØªÙŠØ´ÙŠØ±Øª Ø£Ø·ÙØ§Ù„", price: 120, img: "https://via.placeholder.com/240x200?text=ØªÙŠØ´ÙŠØ±Øª+Ø£Ø·ÙØ§Ù„", category:"kids" },
  { name: "Ø¨Ø¯Ù„Ø© Ø£Ø·ÙØ§Ù„", price: 280, img: "https://via.placeholder.com/240x200?text=Ø¨Ø¯Ù„Ø©+Ø£Ø·ÙØ§Ù„", category:"kids" },
  { name: "ÙØ³ØªØ§Ù† Ø£Ø·ÙØ§Ù„", price: 300, img: "https://via.placeholder.com/240x200?text=ÙØ³ØªØ§Ù†+Ø£Ø·ÙØ§Ù„", category:"kids" }
];

const productsContainer = document.getElementById("products");
let cart = [];
let orderCounter = 1000;

function renderProducts(filter="all"){
  productsContainer.innerHTML = "";
  productsData.filter(p=>filter==="all"||p.category===filter).forEach(p=>{
    const div=document.createElement("div");
    div.classList.add("product");
    div.innerHTML=`<img src="${p.img}" alt="${p.name}">
      <h3>${p.name}</h3>
      <p>${p.price} Ø¬Ù†ÙŠÙ‡</p>
      <label>Ø§Ù„ÙƒÙ…ÙŠØ©: <input type="number" value="1" min="1" id="qty-${p.name}"></label>
      <button onclick="addToCart('${p.name}',${p.price})">Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©</button>`;
    productsContainer.appendChild(div);
  });
}

function addToCart(name,price){
  const qty=parseInt(document.getElementById(`qty-${name}`).value)||1;
  const exist=cart.find(i=>i.name===name);
  if(exist) exist.qty+=qty; else cart.push({name,price,qty});
  updateCart();
}

function updateCart(){
  const cartItems=document.getElementById("cart-items");
  cartItems.innerHTML="";
  let total=0;
  cart.forEach((item,index)=>{
    const li=document.createElement("li");
    li.innerHTML=`${item.name} - ${item.price} Ø¬Ù†ÙŠÙ‡ Ã— ${item.qty} = ${item.price*item.qty} Ø¬Ù†ÙŠÙ‡
      <button class="remove" onclick="removeFromCart(${index})">âœ–</button>`;
    cartItems.appendChild(li);
    total+=item.price*item.qty;
  });
  document.getElementById("total").textContent=total;
  document.getElementById("orderProducts").value=cart.map(i=>`${i.name} (Ã—${i.qty})`).join(", ");
  document.getElementById("orderTotal").value=total;
  const today=new Date();
  const pickup=new Date(); pickup.setDate(today.getDate()+2);
  document.getElementById("orderDate").value=today.toLocaleDateString("ar-EG");
  document.getElementById("pickupDate").value=pickup.toLocaleDateString("ar-EG");
}

function removeFromCart(index){ cart.splice(index,1); updateCart(); }
function filterProducts(cat){ document.querySelectorAll(".filter button").forEach(btn=>btn.classList.remove("active")); document.querySelector(`.filter button[onclick="filterProducts('${cat}')"]`).classList.add("active"); renderProducts(cat); }

renderProducts();

let slideIndex=0;
const slides=document.getElementById("slides");
function moveSlide(step){ slideIndex=(slideIndex+step+3)%3; slides.style.transform=`translateX(${-slideIndex*100}%)`; }
setInterval(()=>moveSlide(1),4000);

const form=document.getElementById("checkoutForm");
const modal=document.getElementById("successModal");

form.addEventListener("submit",function(event){
  event.preventDefault();
  const data=new FormData(form);
  const orderId="NH-"+(orderCounter++);
  document.getElementById("orderId").textContent=orderId;
  document.getElementById("orderIdField").value=orderId;
  const tableBody=document.getElementById("invoiceTable");
  tableBody.innerHTML="";
  cart.forEach(item=>{
    const row=document.createElement("tr");
    row.innerHTML=`<td>${item.name}</td><td>${item.qty}</td><td>${item.price} Ø¬Ù†ÙŠÙ‡</td><td>${item.price*item.qty} Ø¬Ù†ÙŠÙ‡</td>`;
    tableBody.appendChild(row);
  });
  document.getElementById("invoiceName").textContent=data.get("name");
  document.getElementById("invoicePhone").textContent=data.get("phone");
  document.getElementById("invoiceTotal").textContent=document.getElementById("orderTotal").value;
  document.getElementById("invoicePickup").textContent=document.getElementById("pickupDate").value;

  fetch(form.action,{method:"POST",body:data,headers:{'Accept':'application/json'}}).then(response=>{
    if(response.ok){
      const orderData={id:orderId,name:data.get("name"),phone:data.get("phone"),items:cart,total:document.getElementById("orderTotal").value,pickup:document.getElementById("pickupDate").value,date:document.getElementById("orderDate").value};
      let orders=JSON.parse(localStorage.getItem("orders"))||[];
      orders.push(orderData);
      localStorage.setItem("orders",JSON.stringify(orders));
      modal.style.display="flex";
      form.reset(); cart=[]; updateCart();
    } else alert("âŒ Ø­ØµÙ„ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„");
  }).catch(()=>{alert("âš ï¸ ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª");});
});

function trackOrder(){
  const id=document.getElementById("trackInput").value.trim();
  const orders=JSON.parse(localStorage.getItem("orders"))||[];
  const order=orders.find(o=>o.id===id);
  const result=document.getElementById("trackResult");
  if(order){
    result.style.display="block";
    result.innerHTML=`<p><b>Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨:</b> ${order.id}</p>
      <p><b>Ø§Ù„Ø§Ø³Ù…:</b> ${order.name}</p>
      <p><b>Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„:</b> ${order.phone}</p>
      <p><b>Ø§Ù„ØªØ§Ø±ÙŠØ®:</b> ${order.date}</p>
      <p><b>Ù…ÙŠØ¹Ø§Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…:</b> ${order.pickup}</p>
      <p><b>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</b> ${order.total} Ø¬Ù†ÙŠÙ‡</p>
      <hr><b>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:</b><ul>${order.items.map(i=>`<li>${i.name} Ã— ${i.qty} = ${i.price*i.qty} Ø¬Ù†ÙŠÙ‡</li>`).join("")}</ul>`;
  } else { result.style.display="block"; result.innerHTML=`<p style="color:red;">âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù„Ø¨</p>`; }
}

function closeModal(){ modal.style.display="none"; }
function printInvoice(){
    const content = document.getElementById("invoice").innerHTML;
    const win = window.open("", "", "width=800,height=600");
    win.document.write(`
      <html><head><title>ÙØ§ØªÙˆØ±Ø© Ø§Ù„Ø·Ù„Ø¨</title></head>
      <body dir="rtl" style="font-family:Tajawal,sans-serif;">${content}</body></html>
    `);
    win.document.close();
    win.print();
}
</script>

</body>

</html>
